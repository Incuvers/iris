<!--
 -*- coding: utf-8 -*-
  Copyright (C) Incuvers, Inc - All Rights Reserved
  Unauthorized copying of this file, via any medium is strictly prohibited
  Proprietary and confidential
-->

<style>
    @keyframes pulse {
        from {
            transform: scale(1);
        }

        50% {
            transform: scale(0.85);
        }

        to {
            transform: scale(1);
        }
    }

    #loader {
        display: block;
        margin-left: auto;
        margin-right: auto;
        max-width: 20%;
        max-height: 20%;
        animation-name: pulse;
        animation-duration: 3s;
        animation-iteration-count: infinite;
    }

    .info {
        font-size: medium
    }

    .centered {
        text-align: center;
        vertical-align: middle;
    }

    .info {
        padding-top: 5%;
    }

    textarea {
        width: 90%;
        height: 90vh;
    }

    .relative {
        padding: 10px;
        position: relative;
        background-color: #fff;
        margin: 10px;
    }
</style>

{% extends 'base.html' %}
{% import "bootstrap/utils.html" as utils %}
{% block page_contet %}

<!-- 
loading image  -->
<div id="loader" class="center">
    <img class="responsive-img" src="{{url_for('static', filename='logo.png')}}" width="90%">
</div>

<div class="container">
    <div class="centered">
        <h1>Download System Logs</h1>
    </div>

    <div class="info">
        <p> Please copy the results of the log below and give them to the verified Incuvers team member to assist in
            their trouble shooting efforts, Thank you!</p>
        <a href="mailto:info@incuvers">Incuvers contact email</a>
    </div>
    <img class="responsive-img" src="{{url_for('static', filename='download.svg')}}" width="10%">
    <ol>

        <div class="relative">
            <form action="/fetchLogs" method="POST" enctype="multipart/form-data">
                <label>
                    <h2>Select Log Type</h2>
                </label>
                <div class="form-group">
                    <button type="submit" class="btn btn-success" name="requested_log" value="snap"
                        onclick="loading();"> snap logs </button>

                    <button type="submit" class="btn btn-success" name="requested_log" value="sysctl"
                        onclick="loading();">systemctl logs
                    </button>

                    <button type="submit" class="btn btn-success" name="requested_log" value="syslog"
                        onclick="loading();"> system logs </button>

                    <button type="submit" class="btn btn-success" name="requested_log" value="journalctl"
                        onclick="loading();"> journalctl
                        logs</button>
                </div>
            </form>
            <form action="/downloadLogFile" method="POST" enctype="multipart/form-data">
                <div class="form-group"></div>
                <button type="submit" class="btn btn-danger" name="output" value="{{logs}}">
                    Download Log </button>
        </div>
        </form>
        <div class="info">
            <textarea type="text" name="txtarea" style="font-family: Arial;font-size: 12pt;width:80%;height:80vw">
    {{logs}}
  </textarea>
            <br><br>
        </div>
    </ol>
</div>
</div>
</div>


<script>

    document.onreadystatechange = function () {
        if (document.readyState !== "complete") {
            document.querySelector(
                "body").style.visibility = "hidden";
            document.querySelector(
                "#loader").style.visibility = "visible";
        } else {
            document.querySelector(
                "#loader").style.display = "none";
            document.querySelector(
                "body").style.visibility = "visible";
        }
    };
    /**
*   sets the incuvers loading logo for the duration of the request or operation
* @returns void
*/
    function loading() {
        $(".container").hide();
        $("#loader").show();
    }
</script>
{% endblock %}